
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nginx</title>
  <link rel="stylesheet" href="../../assets/css/screen.css?v=e9ea648f70">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:400,400i,700,700i,800">

  <script>
    var siteUrl = 'http://manuelviera.com';
  </script>
  <script>
  var themeOptions = {
    disqus_shortname: '',
    search_key: '',
    search_migration: 'v1',
    white_logo: '',
    white_icon: '',
  };
</script>
  <script>
    var localTheme = localStorage.getItem('dawn_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>

  <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="Manuel Viera">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Nginx">
    <meta property="og:description" content="Hace bastante tiempo que tengo en mente escribir un post sobre Nginx  (pronunciado como &amp;quot;engine x&amp;quot;), aunque ya lo he comentado en algún otro post  anterior, y creo que hoy va a ser el día. No por nada en especial, si no porque me apetece compartirlo y además">
    <meta property="og:url" content="http://manuelviera.com/blog/nginx/">
    <meta property="article:published_time" content="2012-11-23T00:00:00.000Z">
    <meta property="article:modified_time" content="2020-07-27T11:36:51.000Z">
    <meta property="article:tag" content="tech">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Nginx">
    <meta name="twitter:description" content="Hace bastante tiempo que tengo en mente escribir un post sobre Nginx  (pronunciado como &amp;quot;engine x&amp;quot;), aunque ya lo he comentado en algún otro post  anterior, y creo que hoy va a ser el día. No por nada en especial, si no porque me apetece compartirlo y además">
    <meta name="twitter:url" content="http://manuelviera.com/blog/nginx/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Manuel Viera">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="tech">
    <meta name="twitter:site" content="@mviera">
    <meta name="twitter:creator" content="@mviera">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Manuel Viera",
        "url": "http://manuelviera.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "http://manuelviera.com/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "Manuel Viera",
        "image": {
            "@type": "ImageObject",
            "url": "http://manuelviera.com/content/images/2020/06/2020-06-22-161222_428x430_scrot.png",
            "width": 428,
            "height": 430
        },
        "url": "http://manuelviera.com/author/mviera/",
        "sameAs": [
            "https://manuelviera.com",
            "https://twitter.com/mviera"
        ]
    },
    "headline": "Nginx",
    "url": "http://manuelviera.com/blog/nginx/",
    "datePublished": "2012-11-23T00:00:00.000Z",
    "dateModified": "2020-07-27T11:36:51.000Z",
    "keywords": "tech",
    "description": "Hace bastante tiempo que tengo en mente escribir un post sobre Nginx\n(pronunciado como &quot;engine x&quot;), aunque ya lo he comentado en algún otro post\nanterior, y creo que hoy va a ser el día. No por nada en especial, si no porque\nme apetece compartirlo y además es un servidor web que me gusta mucho y que, en\nciertos aspectos, ha ido conquistando terreno de otros servidores web.\n\n¿Qué es Nginx?\nComo decía, Nginx [http://nginx.org/] es un servidor HTTP libre, de código\nabierto, de alto rendimiento y qu",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://manuelviera.com/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.19">
    <link rel="alternate" type="application/rss+xml" title="Manuel Viera" href="../rss/index.html">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;0,900;1,400;1,700&amp;display=swap">
</head>
<body class="post-template tag-tech">
  <svg width="0" height="0" style="display: none;">
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="arrow-left">
    <title>arrow-left</title>
    <path d="M26.667 14.667v2.667h-16L18 24.667l-1.893 1.893L5.547 16l10.56-10.56L18 7.333l-7.333 7.333h16z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="arrow-right">
    <title>arrow-right</title>
    <path d="M5.333 14.667v2.667h16L14 24.667l1.893 1.893L26.453 16 15.893 5.44 14 7.333l7.333 7.333h-16z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="brightness-2">
    <title>brightness-2</title>
    <path d="M13.333 2.667c-2.427 0-4.707.667-6.667 1.8 4 2.307 6.667 6.6 6.667 11.533s-2.667 9.227-6.667 11.533c1.96 1.133 4.24 1.8 6.667 1.8 7.36 0 13.333-5.973 13.333-13.333S20.693 2.667 13.333 2.667z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="chevron-left">
    <title>chevron-left</title>
    <path d="M20.547 22.107L14.44 16l6.107-6.12L18.667 8l-8 8 8 8 1.88-1.893z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="chevron-right">
    <title>chevron-right</title>
    <path d="M11.453 22.107L17.56 16l-6.107-6.12L13.333 8l8 8-8 8-1.88-1.893z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="circle-half-full">
    <title>circle-half-full</title>
    <path d="M16 2.667c-7.36 0-13.333 5.973-13.333 13.333s5.973 13.333 13.333 13.333c7.36 0 13.333-5.973 13.333-13.333s-5.973-13.333-13.333-13.333zM16 5.333c5.893 0 10.667 4.773 10.667 10.667s-4.773 10.667-10.667 10.667v-21.333z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="dots-horizontal">
    <title>dots-horizontal</title>
    <path d="M21.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM13.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM5.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="facebook-box">
    <title>facebook-box</title>
    <path d="M6.667 4h18.667c1.467 0 2.667 1.2 2.667 2.667v18.667c0 1.467-1.2 2.667-2.667 2.667H6.667A2.675 2.675 0 0 1 4 25.334V6.667C4 5.2 5.2 4 6.667 4zM24 6.667h-3.333A4.672 4.672 0 0 0 16 11.334v3.333h-2.667v4H16V28h4v-9.333h4v-4h-4V12c0-.733.6-1.333 1.333-1.333H24v-4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="facebook">
    <title>facebook</title>
    <path d="M22.667 2.667V8H20c-.92 0-1.333 1.08-1.333 2v3.333h4v5.333h-4v10.667h-5.333V18.666h-4v-5.333h4V8a5.332 5.332 0 0 1 5.333-5.333h4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 40 40" id="loader">
    <title>loader</title>
    <path opacity="0.3" fill="currentColor" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946 s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634 c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"></path>
    <path fill="currentColor" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0 C22.32,8.481,24.301,9.057,26.013,10.047z">
      <animatetransform attributetype="xml" attributename="transform" type="rotate" from="0 20 20" to="360 20 20" dur="0.5s" repeatcount="indefinite"></animatetransform>
    </path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="magnify">
    <title>magnify</title>
    <path d="M12.667 4a8.667 8.667 0 0 1 8.667 8.667c0 2.147-.787 4.12-2.08 5.64l.36.36h1.053l6.667 6.667-2 2-6.667-6.667v-1.053l-.36-.36a8.689 8.689 0 0 1-5.64 2.08C7.88 21.334 4 17.454 4 12.667S7.88 4 12.667 4zm0 2.667c-3.333 0-6 2.667-6 6s2.667 6 6 6 6-2.667 6-6-2.667-6-6-6z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="menu-down">
    <title>menu-down</title>
    <path d="M9.333 13.333L16 20l6.667-6.667H9.334z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="rss-box">
    <title>rss-box</title>
    <path d="M6.667 4h18.667c1.467 0 2.667 1.2 2.667 2.667v18.667c0 1.467-1.2 2.667-2.667 2.667H6.667A2.675 2.675 0 0 1 4 25.334V6.667C4 5.2 5.2 4 6.667 4zM10 20c-1.107 0-2 .893-2 2s.893 2 2 2 2-.893 2-2-.893-2-2-2zm-2-6.667V16c4.413 0 8 3.587 8 8h2.667c0-5.893-4.773-10.667-10.667-10.667zM8 8v2.667c7.36 0 13.333 5.973 13.333 13.333H24c0-8.84-7.16-16-16-16z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="star">
    <title>star</title>
    <path d="M16 23.027L24.24 28l-2.187-9.373 7.28-6.307-9.587-.827-3.747-8.827-3.747 8.827-9.587.827 7.267 6.307L7.759 28l8.24-4.973z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" id="table-of-contents">
    <path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="twitter-box">
    <title>twitter-box</title>
    <path d="M6.667 4h18.667c1.467 0 2.667 1.2 2.667 2.667v18.667c0 1.467-1.2 2.667-2.667 2.667H6.667A2.675 2.675 0 0 1 4 25.334V6.667C4 5.2 5.2 4 6.667 4zm16.946 8.44c.64-.533 1.387-1.173 1.72-1.88-.547.28-1.2.453-1.92.547.667-.48 1.213-1.107 1.493-1.96-.693.373-1.4.693-2.28.853-2.067-2.493-7.013-.467-6.133 3.267-3.48-.213-5.6-1.787-7.36-3.72-1 1.627-.133 4.093 1.053 4.773-.613-.04-1.08-.227-1.52-.44.053 2.053 1.187 3.04 2.773 3.573a4.47 4.47 0 0 1-1.52.04c.493 1.427 1.52 2.32 3.28 2.507-1.2 1.013-3.413 1.72-5.2 1.44 1.533.973 3.28 1.747 5.707 1.64 5.88-.267 9.813-4.48 9.907-10.64z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="twitter">
    <title>twitter</title>
    <path d="M29.947 8a11.423 11.423 0 0 1-3.28.92 5.738 5.738 0 0 0 2.507-3.173 11.52 11.52 0 0 1-3.627 1.4C24.494 6 23.014 5.334 21.334 5.334c-3.133 0-5.693 2.56-5.693 5.72 0 .453.053.893.147 1.307A16.261 16.261 0 0 1 4.001 6.388a5.663 5.663 0 0 0-.773 2.867c0 1.987 1 3.747 2.547 4.747-.947 0-1.827-.267-2.6-.667v.04a5.724 5.724 0 0 0 4.587 5.613 5.644 5.644 0 0 1-2.574.093c.72 2.253 2.813 3.933 5.333 3.973-1.947 1.547-4.413 2.453-7.107 2.453-.453 0-.907-.027-1.36-.08A16.19 16.19 0 0 0 10.827 28c10.507 0 16.28-8.72 16.28-16.28 0-.253 0-.493-.013-.747A11.42 11.42 0 0 0 29.947 8z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="white-balance-sunny">
    <title>white-balance-sunny</title>
    <path d="M4.733 24.72l1.88 1.88 2.4-2.387L7.12 22.32zm9.934 5.213h2.667V26h-2.667zM16 7.333c-4.413 0-8 3.587-8 8s3.587 8 8 8 8-3.587 8-8c0-4.427-3.587-8-8-8zm10.667 9.334h4V14h-4zm-3.68 7.546l2.4 2.387 1.88-1.88-2.387-2.4zm4.28-18.266l-1.88-1.88-2.4 2.387 1.893 1.893zM17.333.733h-2.667v3.933h2.667zM5.333 14h-4v2.667h4zm3.68-7.547l-2.4-2.387-1.88 1.88 2.387 2.4 1.893-1.893z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32" id="window-close">
    <title>window-close</title>
    <path d="M17.947 16l7.387 7.387v1.947h-1.947L16 17.947l-7.387 7.387H6.666v-1.947L14.053 16 6.666 8.613V6.666h1.947L16 14.053l7.387-7.387h1.947v1.947L17.947 16z"></path>
  </symbol>
</svg>  <div class="container">
    <div class="site">
      <header class="site-header">
  <div class="header-left">
    <a class="logo" href="../../">
        <span class="logo-text">Manuel Viera</span>
    </a>
  </div>
    <nav class="main-nav hidden-xs hidden-sm hidden-md">
        <a class="menu-item menu-item-about" href="../../about/">about</a>
  <a class="menu-item menu-item-tech" href="../../tag/tech/">tech</a>
  <a class="menu-item menu-item-self-tracking" href="../../tag/self-tracking/">self-tracking</a>
  <a class="menu-item menu-item-author" href="../../author/mviera/">author</a>

    </nav>
    
    <button class="button-icon hidden-lg hidden-xl js-modal" data-modal="search">
      <svg class="icon"><use xlink:href="#magnify"></use></svg>
    </button>
    <div class="burger hidden-lg hidden-xl">
      <div class="burger-bar"></div>
      <div class="burger-bar"></div>
    </div>

    <div class="mobile-menu hidden-lg hidden-xl">
      <div class="container">
        <nav class="mobile-nav">
            <a class="menu-item menu-item-about" href="../../about/">about</a>
  <a class="menu-item menu-item-tech" href="../../tag/tech/">tech</a>
  <a class="menu-item menu-item-self-tracking" href="../../tag/self-tracking/">self-tracking</a>
  <a class="menu-item menu-item-author" href="../../author/mviera/">author</a>

        </nav>
      </div>
    </div>
  <div class="header-right hidden-xs hidden-sm hidden-md">
      <button class="button-icon js-modal" data-modal="search">
        <svg class="icon"><use xlink:href="#magnify"></use></svg>
      </button>
  </div>
</header>

    <header class="sticky kg-width-full">
      <div class="sticky-title">Nginx</div>
      <button class="button-icon sticky-toc-button">
        <svg class="icon"><use xlink:href="#table-of-contents"></use></svg>
        <div class="sticky-toc"></div>
      </button>
      <div class="sticky-track">
        <div class="sticky-progress"></div>
      </div>
    </header>
      <div class="site-content">
        
<div class="content-area">
  <main class="site-main">
      <article class="single post tag-tech no-image kg-width-narrow">
  <header class="single-header">
      <div class="single-meta">
        <span class="single-meta-item single-meta-date">
          <time datetime="2012-11-23">
            Nov 23, 2012
          </time>
        </span>
        <span class="single-meta-item single-meta-length">
          8 min read
        </span>
          <span class="single-meta-item single-meta-tag">
            <a class="post-tag post-tag-tech" href="../../tag/tech/">
              #tech
            </a>
          </span>
      </div>
    <h1 class="single-title">Nginx</h1>
  </header>
  <div class="single-content u-text-format">
      <!--kg-card-begin: markdown--><p>Hace bastante tiempo que tengo en mente escribir un post sobre Nginx<br>
(pronunciado como "engine x"), aunque ya lo he comentado en algún otro post<br>
anterior, y creo que hoy va a ser el día. No por nada en especial, si no porque me apetece compartirlo y además es un servidor web que me gusta mucho y que, en ciertos aspectos, ha ido conquistando terreno de otros servidores web.</p>
<h2 id="quesnginx">¿Qué es Nginx?</h2>
<p>Como decía, <a href="http://nginx.org/">Nginx</a> es un servidor HTTP libre, de código abierto, de alto rendimiento y que puede ser utilizado para actuar tanto como proxy HTTP reverso, como proxy IMAP/POP3. Nginx es famoso por ser muy ligero, ya que consume muy pocos recursos del sistema; es muy estable, y además su configuración es relativamente sencilla, bastante más simple a la vista que la configuración de Apache2.</p>
<p>Su instalación es bastante sencilla también, independientemente de que lo<br>
hagamos mediante herramientas de paquetería o compilando del código fuente<br>
directamente.</p>
<p>Como apunte, decir que fue escrito por <a href="http://sysoev.ru/en/">Igor Sysoev</a>, de origen ruso, escrito para solventar un problema llamado <a href="http://www.kegel.com/c10k.html">C10K</a>. Resumiendo, ser capaz de manejar 10.000 clientes de forma simultanea.</p>
<p>La primera vez que instalé Nginx, compilando desde las fuentes, fue allá por 2008 simplemente por probarlo. No fue hasta 2009 ó 2010 cuando empecé a usarlo de verdad cuando trabajaba en <a href="http://yaco.es">Yaco Sistemas</a>, para realizar despliegues de aplicaciones web con Django. Y recuerdo que mi primer despliegue utilizando <a href="http://merengueproject.org/">Merengue Project</a> + Nginx + uWSGI, con el fin de ver si mejoraba el rendimiento y la verdad es que quedamos encantados. Así que vamos a instalarlo ya!</p>
<h2 id="instalandonginxperocmo">Instalando Nginx ¿pero cómo?</h2>
<p>Es posible que antes de instalar nos surjan dudas con respecto a la forma de instalar ya sea Nginx u otro software en nuestro sistema. Hay varias formas de instalar Nginx:</p>
<ul>
<li>Descargar el código fuente y seguir el proceso de instalación típico: configurar, compilar e instalar; también conocido como <strong>cmmi</strong> (<strong>c</strong>onfigure - <strong>m</strong>ake - <strong>m</strong>ake <strong>i</strong>nstall).</li>
<li>Utilizando las herramientas de paquetería de nuestra distribución: <strong>Aptitude</strong> o <strong>APT</strong> si utilizamos una distribución basada en Debian, <strong>yum</strong> si utilizamos CentOS, RedHat, Fedora o similar; etc.</li>
<li>Añadir el repositorio oficial de Nginx a nuestro sistema de paquetería, si hubiera alguno disponible y compatible; en caso de que no estuviese disponible el paquete en nuestra distribución.</li>
<li>Descargar el paquete de instalación compatible con nuestro sistema de paquetería, de otra distribución e instalarlo con las herramientas habituales en nuestro sistema.</li>
<li>Descargar un paquete de instalación (<strong>.deb</strong> o <strong>.rpm</strong>, por ejemplo) y convertirlo con <strong>alien</strong> si el paquete descargado no es compatible con nuestro sistema de paquetería.</li>
</ul>
<p>Todas estas formas permitirían instalar Nginx, pero <strong>no todas son<br>
aconsejables</strong>, según qué casos, me explico.</p>
<p>Si se trata de una <strong>instalación en producción</strong>, y con ello me refiero a la instalación de Nginx en un servidor de un cliente, o en un servidor de<br>
producción para nuestra empresa; me decantaría sin dudar por la <strong>instalación mediante el sistema de paquetería</strong>. De esta forma, contaría con todas las posibles futuras actualizaciones de seguridad y/o correcciones del paquete de forma muy cómoda utilizando las herramientas de paquetería del sistema.</p>
<p>Si la instalación de Nginx se va a realizar en un <strong>sistema antiguo</strong>, y en ese caso, si es que existe un paquete para Nginx en el sistema de paquetería, es probable que sea <strong>más antiguo y desactualizado</strong> que la versión actual de Nginx. Con lo que es muy posible que no cuente con mejoras de <strong>fallos de seguridad</strong>, arreglos de <strong>bugs</strong> encontrados, etc; en este caso, personalmente, optaría por una <strong>instalación desde las fuentes</strong>. Es cierto que antes de instalar desde las fuentes sopesaría mis necesidades sobre Nginx, es decir, si es una instalación en producción pero sólo voy a servir <strong>HTML estático</strong>, es muy posible que aun siendo una versión antigua de Nginx, hubiera optado por la <strong>instalación por paquetería</strong>. Pero si el fin es servir una <strong>web más compleja</strong>, optaría por <strong>utilizar la versión estable más reciente de Nginx</strong> y <strong>compilar desde las fuentes</strong>.</p>
<p>Con respecto a <strong>descargar un paquete de otra distribución</strong> o convertir el<br>
paquete con <strong>alien</strong>, <strong>no lo recomendaría</strong> a menos que fuera una situación extrema, que no haya otro camino, y si la distribución a la que pertenece el paquete es muy similar a la que estamos usando. En cualquier otro caso, no lo usaría nunca, ya que: <strong>no</strong> contamos con futuras <strong>actualizaciones</strong> del paquete, al pertenecer a otra distribución <strong>es posible que los ficheros se instalen</strong> en <strong>directorios no habituales en nuestra distribución</strong>, es posible que los <strong>scripts SysV</strong> del servicio <strong>no funcionen</strong>, etc.</p>
<p>Esto sólo es mi humilde opinión de lo que haría en una situación real. Es<br>
imposible describir todas las posibilidades o dar unas directrices de qué hacer en una determinada situación, más que elegir una nosotros mismos basándonos en nuestro conocimiento, experiencia y muchos otros factores. En caso de dudar, si es posible, es aconsejable obtener una segunda opinión de un compañero o consultarlo con alguien con rango superior.</p>
<p>Y bueno, después de esta parrafada (perdón), nos puede quedar claro, qué dos opciones de instalación elegiría yo, <strong>IMHO</strong> (¿qué pensais vosotros?) Así que veremos la instalación utilizando herramientas de paquetería y compilando desde el código fuente.</p>
<h2 id="instalacinporpaquetera">Instalación por paquetería</h2>
<p>La instalación por paquetería es bastante trivial si ya estamos familiarizados con estas herramientas. Bastaría con buscar el paquete en la base de datos de nuestro sistema de paquetería, ver el nombre e instalarlo.</p>
<h3 id="debian">Debian</h3>
<p>En <strong>Debian 7</strong> (wheezy) que es la que estoy usando actualmente hay varios<br>
paquetes de Nginx en los repositorios oficiales de Debian:</p>
<ul>
<li><code>nginx-light</code> : una versión "light" que sólo incluye un Nginx precompilado con unos cuantos módulos, pero no todos.</li>
<li><code>nginx-full</code> : incluye Nginx precompilado con todos los módulos estandar incluidos.</li>
<li><code>nginx-extras</code> : se trata de Nginx precompilado con todos los módulos estandar más una serie de módulos extras incluyendo algunos como Perl.</li>
</ul>
<p>Depende de las necesidades que tengamos instalaremos uno u otro, pero en este caso instalaré nginx-full, y para ello ejecutaremos la siguiente instrucción:</p>
<pre><code>root@debian:~# apt-get install nginx-full
</code></pre>
<p>La instalación no tardará mucho en finalizar y tendremos instalado Nginx en<br>
nuestro sistema. Una de las ventajas de utilizar el sistema de paquetería de nuestro sistema frente a compilar nuestra propia versión de Nginx es que el paquete además de instalar Nginx, instala ciertas utilidades adicionales como pueden ser los scripts de inicio SysV y demás scripts que nos permiten<br>
arrancar, reiniciar o parar nuestro servidor Nginx. Para arrancar Nginx<br>
utilizaremos, como root, el comando <strong>service</strong>:</p>
<pre><code>root@debian:~# service nginx start
Starting nginx: nginx.
</code></pre>
<p>Si consultamos el estado utilizando el parámetro <strong>status</strong> podremos ver que Nginx ya se encuentra en funcionamiento:</p>
<pre><code>root@debian:~# service nginx status
nginx is running.
</code></pre>
<p>Para comprobar si realmente el puerto 80 (http/tcp) está escuchando podemos<br>
utilizar el comando <strong>netstat</strong> de la siguiente forma:</p>
<pre><code>root@debian:~# netstat -ntp
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 192.168.1.40:80         192.168.1.35:60110      ESTABLISHED 3262/nginx: worker
</code></pre>
<h3 id="centos">CentOS</h3>
<p>En <strong>CentOS</strong> al parecer no hay paquete en los repositorios oficiales por<br>
defecto, así que hay que añadir primero el repositorio a nuestra lista de<br>
repositorios y luego instalarlo. Es muy fácil, sólo hay que hace lo siguiente:</p>
<p>Podemos descargar el paquete <strong>RPM</strong> que instala la configuración del<br>
repositorio y posteriormente instalarlo con la utilida <code>rpm</code>, o instalarlo<br>
directamente con la utilidad <code>yum</code> pasando la URL completa hacia el fichero RPM de la siguiente forma:</p>
<pre><code>[root@centos /]# yum install http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm
</code></pre>
<p>Una vez instalado, podemos consultar la configuración del repositorio de Nginx que se ha instalado en el fichero <code>/etc/yum.repos.d/nginx.repo</code>. Tras instalar la configuración del repositorio, ya solo nos queda utilizar <code>yum</code> para instalar Nginx:</p>
<pre><code>[root@centos /]# yum install nginx
</code></pre>
<p>Ya solo nos queda arrancar nuestro Nginx utilizando la utilidad <code>service</code> al igual que hicimos en Debian.</p>
<p><strong>IMPORTANTE:</strong> Es posible que en CentOS ya se encuentre ejecutándose una<br>
instancia de <code>httpd</code> (Apache2) por defecto. Antes de arrancar Nginx es<br>
necesario parar dicha instancia o Nginx informará con un error indicando que el puerto 80 (http/tcp) se encuentra ocupado.</p>
<pre><code>[root@centos /]# service nginx start
Starting nginx: nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
</code></pre>
<p>Si accedemos ahora utilizando nuestro navegador a <code>http://localhost:80</code> veremos un útil, pero poco bonito, mensaje: <strong>Welcome to nginx!</strong> El fichero de configuración para ambos casos se encuentra en <code>/etc/nginx/nginx.conf</code>.</p>
<h2 id="instalandodesdelasfuentes">Instalando desde las fuentes</h2>
<p>Antes de comenzar, deberemos disponer en nuestro sistema de ciertas utilidades que serán de vital importancia para poder compilar en nuestro sistema, como <strong>gcc</strong>, <strong>make</strong> y otras librerias de desarrollo que se necesitan instaladas para poder compilar Nginx:</p>
<pre><code>root@debian:~# apt-get install gcc make libpcre3 libpcre3-dev zlib1g zlib1g-dev
</code></pre>
<p>Instalados los prerequisitos, procedemos entonces con la descarga de las<br>
fuentes de Nginx desde su sitio oficial:</p>
<pre><code>root@debian:~# wget http://nginx.org/download/nginx-1.2.4.tar.gz
</code></pre>
<p>A continuación descomprimimos y procedemos con la configuración, compilación e instalación:</p>
<pre><code>root@debian:~# tar xzf nginx-1.2.4.tar.gz 
root@debian:~# cd nginx-1.2.4/
root@debian:~/nginx-1.2.4# 
root@debian:~/nginx-1.2.4# ./configure &amp;&amp; make &amp;&amp; make install
</code></pre>
<p>Por defecto, Nginx se instala en <code>/usr/local/</code> aunque podemos modificar este comportamiento con <code>./configure --prefix=/path/to/install/</code>. Como comentaba antes, esta vez no contamos con scripts de inicio SysV, así que tendremos que arrancar Nginx de forma manual, ejecutando directamente el binario de <code>nginx</code>:</p>
<pre><code>root@debian:~# /usr/local/nginx/sbin/nginx
</code></pre>
<p>Si todo va bien, deberíamos tener inmediatamente el puerto 80 escuchando<br>
peticiones HTTP en nuestro sistema. Para para Nginx, también deberemos hacerlo de forma totalmente manual, utilizando la opción <code>-s</code> y pasándole el argumento <code>stop</code>; aunque también se puede hacer uso de otros argumentos como <code>quit</code>, <code>reopen</code> y <code>reload</code>:</p>
<pre><code>root@debian:~# /usr/local/nginx/sbin/nginx -s stop
</code></pre>
<h2 id="laconfiguracinpordefecto">La configuración por defecto</h2>
<p>La ubicación del fichero de configuración cambia dependiendo de la forma en que se haya instalado, a menos que cambiemos el comportamiento por defecto con <code>./configure --conf-path</code> al compilar desde las fuentes. Si Nginx ha sido instalado utilizando el sistema de paquetería se encontrará en<br>
<code>/etc/nginx/nginx.conf</code>. Sin embargo, si se ha compilado desde las fuentes y no se ha modificado la ruta del fichero de configuración, entonces lo más probable es que se encuentre en <code>/usr/local/nginx/conf/nginx.conf</code>. El contenido de este fichero es bastante similar en ambos casos, aunque por defecto, hay muchas lineas de ejemplo comentadas. Si eliminamos todos los comentarios, se puede apreciar que la configuración es bastante simple:</p>
<pre><code>root@debian:~# grep -v "#" /usr/local/nginx/conf/nginx.conf |uniq

worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;

    keepalive_timeout  65;

    server {
        listen       80;
        server_name  localhost;

        location / {
            root   html;
            index  index.html index.htm;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

    }

}
</code></pre>
<p>Como se puede ver, la configuración se estructura en bloques delimitados por llaves {} (en inglés <em>curly braces</em>) haciéndola mucho más legible que un bloque de configuración de Apache2, por ejemplo. Como parámetros a destacar, me gustaría comentar los siguientes:</p>
<ul>
<li><code>worker_processess</code> : indica el número de workers/procesos de nginx que se van a arrancar simultaneamente. Si establecemos <code>worker_processes</code> con valor 2, se ejecutarán dos procesos worker de Nginx.</li>
<li><code>worker_connections</code> : hace referencia al número de conexiones por worker. Esto quiere decir que el número de conexiones que será capaz de servir nuestro servidor nginx corresponde a worker_processes x worker_connections. Según la configuración del ejemplo, solo aceptará 1024 conexiones simultaneas (1 (<em>worker_processes</em>) x 1024 (<em>worker_connections</em>)</li>
<li><code>http {}</code> : bloque donde se especifica la configuración de cada servidos. Es posible configurar varios bloques <code>server {}</code> en un mismo bloque <code>http {}</code>, utilizando diferentes puertos lógicamente.</li>
<li><code>server {}</code> : configuración para un servidor concreto, que normalmente se corresponderá con un número de puerto único.</li>
<li><code>listen 80;</code> : puerto de escucha de Nginx. Se corresponde con la directiva <code>Listen</code> de Apache2</li>
<li><code>server_name localhost;</code> : hostname o FQDN del servidor. Se corresponde con la directiva <code>ServerName</code> de Apache2.</li>
<li><code>location</code> : configuración de un <code>location</code> concreto. Se corresponde con la directiva <code>Location</code> en Apache2.</li>
<li><code>root</code> : directorio utilizado para buscar los ficheros estáticos. Se corresponde con la directiva <code>DocumentRoot</code> de Apache2.</li>
</ul>
<p>Bueno, eso es todo por hoy amigos, espero que os haya sido de utilidad para<br>
aquellos que no conocíais Nginx o aquellos que nunca lo habíais instalado. En próximos posts veremos diferentes tipos de configuración que podemos realizar con Nginx. Mientras tanto, podeis encontrar mucha más información en la wiki de Nginx en <a href="http://wiki.nginx.org/Main">http://wiki.nginx.org/Main</a></p>
<p>Un saludo a todos y no dudéis en comentar! ;-)</p>
<!--kg-card-end: markdown-->
  </div>
    <footer class="single-footer kg-width-normal">
      <div class="single-footer-left">
          <div class="navigation navigation-previous">
            <a class="navigation-link" href="../version-de-os-x-incompatible/">
              <svg class="icon navigation-icon"><use xlink:href="#arrow-left"></use></svg>
            </a>
          </div>
      </div>
      <div class="single-footer-middle">
        <div class="single-footer-top">
          <h3 class="single-footer-title">Published by:</h3>
          <div class="author-list">
              <div class="author-image-placeholder u-placeholder square">
                <a href="../../author/mviera/" title="Manuel Viera">
                  <img class="author-image lazyload u-object-fit" data-src="/content/images/size/w150/2020/06/2020-06-22-161222_428x430_scrot.png" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Manuel Viera">
                </a>
              </div>
          </div>
        </div>
        <div class="single-footer-bottom">
          <div class="share">
            <a class="share-link share-link-facebook" href="https://www.facebook.com/sharer.php?u=http://manuelviera.com/blog/nginx/" target="_blank" rel="noopener noreferrer">
              <svg class="icon icon-facebook"><use xlink:href="#facebook"></use></svg>
              Share
            </a>
            <a class="share-link share-link-twitter" href="https://twitter.com/intent/tweet?url=http://manuelviera.com/blog/nginx/&amp;text=Nginx" target="_blank" rel="noopener noreferrer">
              <svg class="icon icon-twitter"><use xlink:href="#twitter"></use></svg>
              Tweet
            </a>
          </div>
        </div>
      </div>
      <div class="single-footer-right">
          <div class="navigation navigation-next">
            <a class="navigation-link" href="../adios-2012-hello-2013/">
              <svg class="icon navigation-icon"><use xlink:href="#arrow-right"></use></svg>
            </a>
          </div>
      </div>
    </footer>
</article>          <section class="related-wrapper kg-width-full">
      <div class="container">
        <div class="kg-width-normal">
          <h3 class="related-title">You might also like...</h3>
          <div class="related-feed">
              <article class="feed post no-image">
  <div class="feed-calendar">
    <div class="feed-calendar-month">
      Aug
    </div>
    <div class="feed-calendar-day">
      10
    </div>
  </div>
  <h2 class="feed-title">Find and the importance of parameters order</h2>
  <div class="feed-right">
    <svg class="icon feed-visibility feed-visibility-public"><use xlink:href="#star"></use></svg>
    <div class="feed-length">
      1 min read
    </div>
  </div>
  <svg class="icon feed-icon"><use xlink:href="#chevron-right"></use></svg>
  <a class="u-permalink" href="../find-and-the-importance-of-parameters-order/"></a>
</article>              <article class="feed post featured">
  <div class="feed-calendar">
    <div class="feed-calendar-month">
      Aug
    </div>
    <div class="feed-calendar-day">
      02
    </div>
  </div>
  <h2 class="feed-title">Compartiendo ficheros con GlusterFS</h2>
  <div class="feed-right">
    <svg class="icon feed-visibility feed-visibility-public"><use xlink:href="#star"></use></svg>
    <div class="feed-length">
      6 min read
    </div>
  </div>
  <svg class="icon feed-icon"><use xlink:href="#chevron-right"></use></svg>
  <a class="u-permalink" href="../compartiendo-ficheros-con-glusterfs-2/"></a>
</article>              <article class="feed post no-image">
  <div class="feed-calendar">
    <div class="feed-calendar-month">
      Nov
    </div>
    <div class="feed-calendar-day">
      12
    </div>
  </div>
  <h2 class="feed-title">AWS Summit Barcelona 2015</h2>
  <div class="feed-right">
    <svg class="icon feed-visibility feed-visibility-public"><use xlink:href="#star"></use></svg>
    <div class="feed-length">
      7 min read
    </div>
  </div>
  <svg class="icon feed-icon"><use xlink:href="#chevron-right"></use></svg>
  <a class="u-permalink" href="../aws-summit-barcelona-2015/"></a>
</article>              <article class="feed post no-image">
  <div class="feed-calendar">
    <div class="feed-calendar-month">
      Apr
    </div>
    <div class="feed-calendar-day">
      29
    </div>
  </div>
  <h2 class="feed-title">Instalar Solr en Jetty</h2>
  <div class="feed-right">
    <svg class="icon feed-visibility feed-visibility-public"><use xlink:href="#star"></use></svg>
    <div class="feed-length">
      4 min read
    </div>
  </div>
  <svg class="icon feed-icon"><use xlink:href="#chevron-right"></use></svg>
  <a class="u-permalink" href="../instalar-solr-en-jetty/"></a>
</article>              <article class="feed post no-image">
  <div class="feed-calendar">
    <div class="feed-calendar-month">
      Mar
    </div>
    <div class="feed-calendar-day">
      02
    </div>
  </div>
  <h2 class="feed-title">Empezando con MongoDB Part.II</h2>
  <div class="feed-right">
    <svg class="icon feed-visibility feed-visibility-public"><use xlink:href="#star"></use></svg>
    <div class="feed-length">
      10 min read
    </div>
  </div>
  <svg class="icon feed-icon"><use xlink:href="#chevron-right"></use></svg>
  <a class="u-permalink" href="../empezando-con-mongodb-part-ii/"></a>
</article>          </div>
        </div>
      </div>
    </section>
        <div class="comment kg-width-narrow">
  <div id="disqus_thread">
    <button class="button button-secondary" onclick="loadDisqus();">Load comments</button>
  </div>
</div>

<script>
  // DON'T EDIT BELOW THIS LINE
  if (themeOptions.disqus_shortname == '') {
    document.querySelector('.comment').remove();
  }
  
  var disqus_config = function () {
    this.page.url = 'http://manuelviera.com/blog/nginx/';
    this.page.identifier = 'ghost-5ee614e246e19912dcb4153a';
  };

  function loadDisqus() {
    var d = document, s = d.createElement('script');
    s.src = 'https://' + themeOptions.disqus_shortname + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  };
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>  </main>
</div>
      </div>
      <footer class="site-footer">
  <div class="social">
      <a class="social-item social-item-twitter" href="https://twitter.com/mviera" target="_blank" rel="noopener noreferrer">
        <svg class="icon"><use xlink:href="#twitter-box"></use></svg>
      </a>
    <a class="social-item social-item-rss" href="https://feedly.com/i/subscription/feed/http://manuelviera.com/rss/" target="_blank" rel="noopener noreferrer">
      <svg class="icon"><use xlink:href="#rss-box"></use></svg>
    </a>
  </div>

  <div class="copyright">
  Powered by <a href="https://ghost.org/" target="_blank">Ghost</a>
</div>
  <nav class="footer-nav">
    
    <a class="menu-item js-theme" href="index.html#" data-system="System theme" data-dark="Dark theme" data-light="Light theme">
      <svg class="icon theme-icon theme-icon-system"><use xlink:href="#circle-half-full"></use></svg>
      <svg class="icon theme-icon theme-icon-dark"><use xlink:href="#brightness-2"></use></svg>
      <svg class="icon theme-icon theme-icon-light"><use xlink:href="#white-balance-sunny"></use></svg>
      <span class="theme-text">System theme</span>
    </a>
  </nav>
</footer>      <div class="modal-overlay">
  <div class="modal modal-search">
    <div class="form-wrapper">
      <input class="modal-input search-input" type="search" placeholder="Enter keyword...">
      <button class="form-button search-button">
        <svg class="icon icon-search"><use xlink:href="#magnify"></use></svg>
        <svg class="icon icon-close"><use xlink:href="#window-close"></use></svg>
      </button>
    </div>
        <div class="popular-wrapper">
          <h4 class="popular-title">Popular tags</h4>
          <div class="popular-feed">
              <a class="popular" href="../../tag/tech/">tech</a>
              <a class="popular" href="../../tag/self-tracking/">self-tracking</a>
              <a class="popular" href="../../tag/offtopic/">offtopic</a>
          </div>
        </div>
    <div class="search-result"></div>
  </div>
  <button class="button-icon modal-close">
    <svg class="icon icon-close"><use xlink:href="#window-close"></use></svg>
  </button>
</div>      <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg"></div>

  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
      <!-- Container that holds slides. 
          PhotoSwipe keeps only 3 of them in the DOM to save memory.
          Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>

    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter"></div>

        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--share" title="Share"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

        <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip"></div> 
      </div>

      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

      <div class="pswp__caption">
        <div class="pswp__caption__center"></div>
      </div>
    </div>
  </div>
</div>    </div>
  </div>

  <script>
    var body = document.querySelector('body');
    if (window.innerWidth > body.clientWidth + 5) {
      document.documentElement.style.setProperty('--scrollbar', (window.innerWidth - body.clientWidth) + 'px');
    }
  </script>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous">
  </script>
  <script src="../../assets/js/main.min.js?v=e9ea648f70"></script>


  
</body>
